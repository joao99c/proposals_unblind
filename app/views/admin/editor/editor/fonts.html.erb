<%= turbo_frame_tag dom_id(@deal, :sidebar) do %>
  <div class="h-full overflow-scroll">
    <div class="flex flex-col flex-1 pt-5 pb-4 px-3 space-y-2">

      <div class="flex justify-between items-center">
        <%= link_to admin_deal_editor_deal_sections_path(@deal) do %>
          <%= heroicon("x", options: { class: "h-5 w-5" }) %>
        <% end %>
      </div>

      <h1 class="text-base font-semibold">Fonts</h1>

      <%= form_with model: @deal,
                    url: admin_deal_editor_fonts_path(@deal),
                    data: {
                      controller: "editor--form editor--autosave",
                      action: "editor:page-section:changed->editor--autosave#save",
                      "editor--form-id": @deal.id,
                      remote: true,
                      turbo: true,
                    },
                    method: :patch do |form| %>

        <% %w[heading text].map do |item| %>
          <div data-controller="editor--slider--weight" data-target="<%= item %>">
            <div class="flex items-center">
              <%= form.label "#{item}_typeface_id" %>
              <%= form.select "#{item}_typeface_id",
                              Font.select('distinct(name), id, weights').map { |f| [f.name, f.id, data: { weights: f.weights }] },
                              {},
                              {
                                selected: form.object.public_send("#{item}_typeface_id"),
                                data: {
                                  "editor--slider--weight-target": "fontInput",
                                  key: "#{item}_typeface_id"
                                }
                              } %>
            </div>

            <div class="flex items-center">
              <%= form.label "#{item}_weight" %>
              <%= form.select "#{item}_weight",
                              [100, 200, 300, 400, 500, 600, 700, 800, 900],
                              {},
                              {
                                selected: form.object.public_send("#{item}_weight"),
                                data: {
                                  "editor--slider--weight-target": "weightInput",
                                  key: "#{item}_weight"
                                }
                              }
              %>
            </div>

            <div class="flex items-center">
              <%= form.label "#{item}_spacing" %>
              <%= form.range_field "#{item}_spacing",
                                   max: 0.5,
                                   min: -0.1,
                                   step: 0.05,
                                   data: {
                                     "editor--slider--weight-target": "spacingInput",
                                     key: "#{item}_spacing",
                                   } %>
            </div>

            <div class="flex items-center">
              <%= form.label "#{item}_height" %>
              <%= form.range_field "#{item}_height",
                                   max: 1.5,
                                   min: 1,
                                   step: 0.05,
                                   data: {
                                     "editor--slider--weight-target": "heightInput",
                                     key: "#{item}_height"
                                   } %>
            </div>
          </div>
        <% end %>
      <% end %>
      <br>
    </div>
  </div>
<% end %>